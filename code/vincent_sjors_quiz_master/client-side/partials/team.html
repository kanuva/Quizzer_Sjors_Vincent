<div class="flex-wrapper-team">
    <div class="flex-container z-depth-2">
        <div class="row">
            <div class="col s12">
                <div class="title-box">
                    <h1>#1-Wat is de hoofdstad van Nederland?</h1>
                </div>
                <div class="content-box">
                    <form>
                        <input type="text" name="question" placeholder="Answer..."/>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal">
    <div id="modal" class="modal-content">
        <h4>Type in password to join a room</h4>

        <form>
            <label for="password"></label>
            <input id="roompassword" type="text" name="password" placeholder="Enter room password..." id="teamname"/>
            <label for="teamname"></label>
            <input id="teamname" type="text" name="teamname" placeholder="Enter team name..." id="teamname"/>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" onclick="closeModal($('#roompassword').val(), $('#teamname').val())"
                class="waves-effect btn-flat">agree
        </button>
    </div>
</div>
<script type="text/javascript">
    $('.modal').openModal({
        dismissible: false
    });

    var socket = io.connect(document.location.protocol + '//' + document.location.host);

    function closeModal(roompassword, teamname) {
        console.log("Teamnaam die geenterd is: "+teamname);
        joinRoom(roompassword);
        meldAanwezigheid(teamname, roompassword);
        $('.modal').closeModal();
    }

    function meldAanwezigheid (teamname, roompassword) {
        console.log("ik wil me aanwezig melden");
        socket.emit('meldAanwezig', {Teamname: teamname, Roomname: roompassword});
    }

    function joinRoom(roompassword) {
        socket.emit('join', roompassword);
        console.log(roompassword);
    }

    function enterKey() {
        if (event.keyCode == 13) {
            $("button").click();
        }
    }

    $("input#roompassword").keyup(function (event) {
        enterKey();
    });

    $("input#teamname").keyup(function (event) {
        enterKey();
    });


    socket.on('refuse', function () {
        console.log("ik ben disconnected wss omdat het wachtwoord verkeerd is");
        setTimeout(function () {
            // displayError();
            $('.modal').openModal();
            document.getElementById('roompassword').value = "";
        }, 500);
    });

    socket.on('testttt', function() {
        console.log("ik heb zojuist een testfunctie binnengekregen");
    });

    //    function displayError() {
    //        if (document.getElementById("modal")) {
    //            var divvv = document.getElementById("modal");
    //            var addd = document.createElement("h3");
    //            var value = document.createTextNode("Het ingevulde wachtwoord is vekeerd");
    //            divvv.appendChild(value);
    //            addd.appendChild(divvv);
    //        }
    //    }

</script>