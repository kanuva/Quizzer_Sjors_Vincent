
<div class="flex-wrapper-master">
  <div class="flex-container z-depth-2">
    <div class="row">
      <div class="col s12">
        <div class="title-box">
          <h1>QuizMaster</h1>
        </div>
        <div class="content-box">
          <div class="row">
            <div class="col s3 scores">
              <div class="title-box">
                <h4>Score</h4>
              </div>
              <!-- TEAM WITH SCORE WILL APPEND HERE -->
            </div>
            <div class="col s5">
              <div class="title-box">
                <h4>Content</h4>
              </div>
            </div>
            <div class="col s3">
              <div class="title-box">
                <h4>Questions</h4>
              </div>
              <div ng-repeat="question in getquestions" class="row">
                <div class="col s12">
                  <div class="card">
                    <div class="card-content">
                      <p>{{question.question}}</p>
                    </div>
                    <div class="card-action"><a>{{question.category}}</a></div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col s12">
                  <div class="card">
                    <div class="card-content">
                      <p>Question #2</p>
                    </div>
                    <div class="card-action"><a>categorie: History</a></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal">
    <div class="modal-content">
      <h4>Create a new room</h4>
      <form>
        <label for="roompassword"></label>
        <input id="roompassword" type="text" name="name" placeholder="Type here..." id="teamname"/>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" onclick="closeModal(document.getElementById('roompassword').value)" class="waves-effect btn-flat">agree</button>
    </div>
  </div>
</div>
<script type="text/javascript">
  $('body').removeAttr('style');
  $('body').css({ 'background-image' : "url(/assets/images/grey_wash_wall.png)" });
  var socket = io.connect(document.location.protocol+'//'+document.location.host);
  $('.modal').openModal({
    dismissible: false
  });
  
  $("input#roompassword").keyup(function(event){
    if(event.keyCode == 13){
        $("button").click();
    }
  });

  socket.on('nieuweclient', function(data){
    console.log("er is een nieuwe client met als teamnaam: " + data.Teamname);
    addTeam(data.Teamname, null);
  });

  function addTeam(name, score) {
    if(score === undefined || score === null) { score = 0; }
    $(".content-box .row .col.s3.scores").append("<div class='row'><div class='col s6'><p> " + name + "</p></div><div class='col s6'><p>" + score + "</p></div></div>");
  }
  
  function closeModal(roompassword) {
    CreateRoom(roompassword);
    $('.modal').closeModal();
  }

  function CreateRoom(roompassword) {
    socket.emit('create', roompassword);
    console.log(roompassword);
  }
</script>